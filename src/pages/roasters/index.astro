---
import Layout from "@/layouts/Layout.astro";
const meta = {
  title: "Roasters",
  description: "Third wave coffee roasters.",
} as const;
import roasters from "./roasters.json";
---

<Layout {...meta}>
  <header class="mt-8">
    <h1 class="font-bold text-3xl sm:text-4xl tracking-tight">
      {meta.title}&nbsp;&not;
    </h1>
    {
      meta.description ? (
        <p class="mt-1 text-xl sm:text-2xl font-medium text-muted-foreground max-w-3xl text-balance">
          {meta.description}
        </p>
      ) : null
    }
  </header>

  <section class="mt-8 relative">
    <div class="overflow-x-auto">
      <table class="text-sm w-full min-w-2xl">
        <thead class="text-left font-semibold">
          <tr class="border-b-2 border-black/20">
            <th class="pb-0.5">Name</th>
            <th class="pb-0.5 pl-1">State</th>
            <th class="pb-0.5 pl-1">Address</th>
            <th class="pb-0.5 pl-1 text-right">Website</th>
          </tr>
        </thead>
        <tbody>
          {
            roasters
              .sort((a, b) => a.state.localeCompare(b.state))
              .map((roaster) => {
                return (
                  <tr class="not-first:border-t not-first:border-dashed not-first:border-black/20">
                    <td class="py-0.5 ">{roaster.name}</td>
                    <td class="py-0.5 pl-1">{roaster.state}</td>
                    <td class="py-0.5 pl-1">
                      {roaster.address ? (
                        <a
                          target="_blank"
                          rel="noopener"
                          href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(roaster.address)}`}
                          class="link"
                        >
                          {roaster.address}
                        </a>
                      ) : null}
                    </td>
                    <td class="py-0.5 pl-1 text-right">
                      {roaster.website ? (
                        <a
                          target="_blank"
                          rel="noopener"
                          href={roaster.website}
                          class="link"
                        >
                          View
                        </a>
                      ) : null}
                    </td>
                  </tr>
                );
              })
          }
        </tbody>
      </table>
    </div>
  </section>
</Layout>
