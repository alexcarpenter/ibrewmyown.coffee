---
import { getIndexById, getSlugFromId, isProd } from "@/utils";
import { META } from "@/consts";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import InterviewCard from "@/components/interview-card.astro";
import Navigation from "@/components/navigation.astro";
const collection = await getCollection("interviews", ({ data }) => {
  return isProd ? data.draft !== true : true;
});
const interviews = collection.sort((a, b) => {
  const aDate = a.data.published;
  const bDate = b.data.published;
  return Date.parse(bDate.toString()) - Date.parse(aDate.toString());
});
const latestInterview = interviews.slice(0, 1);
const restInterviews = interviews.slice(1, interviews.length);
---

<Layout>
  <header class="bg-primary p-8 rounded-lg">
    <Navigation class="mb-48" />
    <h1 class="text-5xl tracking-tight text-balance text-primary-foreground">
      I Brew My Own Coffee.
      <span class="text-secondary"
        >A collection of personal coffee brewing setups.</span
      >
    </h1>
  </header>
  <section>
    <div
      class="bg-secondary p-8 rounded-lg flex gap-x-8 items-center text-primary"
    >
      <h2 class="font-semibold tracking-tight">Popular brands</h2>
      <!-- <ul class="flex gap-x-8 justify-center items-center">
        <li>
          <svg viewBox="0 0 252 52" fill="none" class="h-7"
            ><path
              fill="currentColor"
              d="m184.7 41.32-9.61 3.59-9.61-3.59c-.98-.38-2.04.34-2.04 1.4v7.61c0 1.06 1.06 1.78 2.05 1.4l9.6-3.6 9.6 3.6c.98.38 2.05-.34 2.05-1.4v-7.61c0-1.06-1.06-1.78-2.04-1.4ZM25.5 5.4V2.5c0-.83-.67-1.5-1.5-1.5H1.5C.67 1 0 1.67 0 2.5v33c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5V21.35h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H6V6.9h18c.83 0 1.5-.67 1.5-1.5ZM65.6 5.4V2.5c0-.83-.67-1.5-1.5-1.5H41.6c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22.5c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-18v-9.75h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H46.1V6.9h18c.83 0 1.5-.67 1.5-1.5ZM88.65 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM175 0c-10.49 0-19 8.51-19 19s8.51 19 19 19 19-8.51 19-19-8.51-19-19-19Zm0 32.3c-7.3 0-13.1-5.71-13.1-13.3 0-7.59 5.8-13.3 13.1-13.3s13.1 5.71 13.1 13.3c0 7.59-5.8 13.3-13.1 13.3ZM127.86 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM249.81 1h-3.21a1.5 1.5 0 0 0-1.45 1.1l-7.31 26.71-7.31-26.71a1.5 1.5 0 0 0-1.45-1.1h-4.38a1.5 1.5 0 0 0-1.45 1.1l-7.32 26.73-7.32-26.73a1.5 1.5 0 0 0-1.45-1.1h-3.4c-1.01 0-1.73.97-1.43 1.94l10.09 33c.19.63.78 1.06 1.44 1.06l3.92-.01c.67 0 1.26-.45 1.44-1.1l7.57-27.63 7.57 27.64c.18.65.77 1.11 1.45 1.1l3.91-.01c.66 0 1.24-.43 1.43-1.06l10.1-32.99c.29-.96-.43-1.94-1.44-1.94Z"
            ></path></svg
          >
        </li>
        <li>
          <svg viewBox="0 0 252 52" fill="none" class="h-7"
            ><path
              fill="currentColor"
              d="m184.7 41.32-9.61 3.59-9.61-3.59c-.98-.38-2.04.34-2.04 1.4v7.61c0 1.06 1.06 1.78 2.05 1.4l9.6-3.6 9.6 3.6c.98.38 2.05-.34 2.05-1.4v-7.61c0-1.06-1.06-1.78-2.04-1.4ZM25.5 5.4V2.5c0-.83-.67-1.5-1.5-1.5H1.5C.67 1 0 1.67 0 2.5v33c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5V21.35h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H6V6.9h18c.83 0 1.5-.67 1.5-1.5ZM65.6 5.4V2.5c0-.83-.67-1.5-1.5-1.5H41.6c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22.5c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-18v-9.75h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H46.1V6.9h18c.83 0 1.5-.67 1.5-1.5ZM88.65 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM175 0c-10.49 0-19 8.51-19 19s8.51 19 19 19 19-8.51 19-19-8.51-19-19-19Zm0 32.3c-7.3 0-13.1-5.71-13.1-13.3 0-7.59 5.8-13.3 13.1-13.3s13.1 5.71 13.1 13.3c0 7.59-5.8 13.3-13.1 13.3ZM127.86 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM249.81 1h-3.21a1.5 1.5 0 0 0-1.45 1.1l-7.31 26.71-7.31-26.71a1.5 1.5 0 0 0-1.45-1.1h-4.38a1.5 1.5 0 0 0-1.45 1.1l-7.32 26.73-7.32-26.73a1.5 1.5 0 0 0-1.45-1.1h-3.4c-1.01 0-1.73.97-1.43 1.94l10.09 33c.19.63.78 1.06 1.44 1.06l3.92-.01c.67 0 1.26-.45 1.44-1.1l7.57-27.63 7.57 27.64c.18.65.77 1.11 1.45 1.1l3.91-.01c.66 0 1.24-.43 1.43-1.06l10.1-32.99c.29-.96-.43-1.94-1.44-1.94Z"
            ></path></svg
          >
        </li>
        <li>
          <svg viewBox="0 0 252 52" fill="none" class="h-7"
            ><path
              fill="currentColor"
              d="m184.7 41.32-9.61 3.59-9.61-3.59c-.98-.38-2.04.34-2.04 1.4v7.61c0 1.06 1.06 1.78 2.05 1.4l9.6-3.6 9.6 3.6c.98.38 2.05-.34 2.05-1.4v-7.61c0-1.06-1.06-1.78-2.04-1.4ZM25.5 5.4V2.5c0-.83-.67-1.5-1.5-1.5H1.5C.67 1 0 1.67 0 2.5v33c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5V21.35h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H6V6.9h18c.83 0 1.5-.67 1.5-1.5ZM65.6 5.4V2.5c0-.83-.67-1.5-1.5-1.5H41.6c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22.5c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-18v-9.75h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H46.1V6.9h18c.83 0 1.5-.67 1.5-1.5ZM88.65 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM175 0c-10.49 0-19 8.51-19 19s8.51 19 19 19 19-8.51 19-19-8.51-19-19-19Zm0 32.3c-7.3 0-13.1-5.71-13.1-13.3 0-7.59 5.8-13.3 13.1-13.3s13.1 5.71 13.1 13.3c0 7.59-5.8 13.3-13.1 13.3ZM127.86 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM249.81 1h-3.21a1.5 1.5 0 0 0-1.45 1.1l-7.31 26.71-7.31-26.71a1.5 1.5 0 0 0-1.45-1.1h-4.38a1.5 1.5 0 0 0-1.45 1.1l-7.32 26.73-7.32-26.73a1.5 1.5 0 0 0-1.45-1.1h-3.4c-1.01 0-1.73.97-1.43 1.94l10.09 33c.19.63.78 1.06 1.44 1.06l3.92-.01c.67 0 1.26-.45 1.44-1.1l7.57-27.63 7.57 27.64c.18.65.77 1.11 1.45 1.1l3.91-.01c.66 0 1.24-.43 1.43-1.06l10.1-32.99c.29-.96-.43-1.94-1.44-1.94Z"
            ></path></svg
          >
        </li>
        <li>
          <svg viewBox="0 0 252 52" fill="none" class="h-7"
            ><path
              fill="currentColor"
              d="m184.7 41.32-9.61 3.59-9.61-3.59c-.98-.38-2.04.34-2.04 1.4v7.61c0 1.06 1.06 1.78 2.05 1.4l9.6-3.6 9.6 3.6c.98.38 2.05-.34 2.05-1.4v-7.61c0-1.06-1.06-1.78-2.04-1.4ZM25.5 5.4V2.5c0-.83-.67-1.5-1.5-1.5H1.5C.67 1 0 1.67 0 2.5v33c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5V21.35h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H6V6.9h18c.83 0 1.5-.67 1.5-1.5ZM65.6 5.4V2.5c0-.83-.67-1.5-1.5-1.5H41.6c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22.5c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-18v-9.75h10.8c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5H46.1V6.9h18c.83 0 1.5-.67 1.5-1.5ZM88.65 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM175 0c-10.49 0-19 8.51-19 19s8.51 19 19 19 19-8.51 19-19-8.51-19-19-19Zm0 32.3c-7.3 0-13.1-5.71-13.1-13.3 0-7.59 5.8-13.3 13.1-13.3s13.1 5.71 13.1 13.3c0 7.59-5.8 13.3-13.1 13.3ZM127.86 31.1V2.5c0-.83-.67-1.5-1.5-1.5h-3c-.83 0-1.5.67-1.5 1.5v33c0 .83.67 1.5 1.5 1.5h22c.83 0 1.5-.67 1.5-1.5v-2.9c0-.83-.67-1.5-1.5-1.5h-17.5ZM249.81 1h-3.21a1.5 1.5 0 0 0-1.45 1.1l-7.31 26.71-7.31-26.71a1.5 1.5 0 0 0-1.45-1.1h-4.38a1.5 1.5 0 0 0-1.45 1.1l-7.32 26.73-7.32-26.73a1.5 1.5 0 0 0-1.45-1.1h-3.4c-1.01 0-1.73.97-1.43 1.94l10.09 33c.19.63.78 1.06 1.44 1.06l3.92-.01c.67 0 1.26-.45 1.44-1.1l7.57-27.63 7.57 27.64c.18.65.77 1.11 1.45 1.1l3.91-.01c.66 0 1.24-.43 1.43-1.06l10.1-32.99c.29-.96-.43-1.94-1.44-1.94Z"
            ></path></svg
          >
        </li>
      </ul> -->
    </div>
  </section>
  <section class="flex-1">
    <ul class="grid grid-cols-4 gap-4">
      {
        interviews.map((interview, index) => {
          const row = Math.floor(index / 3);
          const posInRow = index % 3;
          const highlight =
            (row % 2 === 0 && posInRow === 0) ||
            (row % 2 === 1 && posInRow === 2);
          return (
            <li
              class:list={[
                "flex flex-col",
                {
                  "col-span-2": highlight,
                },
              ]}
            >
              <InterviewCard
                {...interview}
                variant={highlight ? "highlight" : "default"}
              />
            </li>
          );
        })
      }
    </ul>
  </section>
</Layout>
