---
import { getIndexById, getSlugFromId, isProd } from "@/utils";
import { META } from "@/consts";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import InterviewCard from "@/components/interview-card.astro";
import Navigation from "@/components/navigation.astro";
const collection = await getCollection("interviews", ({ data }) => {
  return isProd ? data.draft !== true : true;
});
const interviews = collection.sort((a, b) => {
  const aDate = a.data.published;
  const bDate = b.data.published;
  return Date.parse(bDate.toString()) - Date.parse(aDate.toString());
});
const latestInterview = interviews.slice(0, 1);
const restInterviews = interviews.slice(1, interviews.length);
---

<Layout>
  <header class="bg-primary p-8 rounded-lg">
    <Navigation class="mb-48" />
    <h1 class="text-5xl tracking-tight text-balance text-primary-foreground">
      I Brew My Own Coffee.
      <span
        class="text-[color-mix(in_srgb,var(--color-primary-foreground),var(--color-primary)_50%)]"
        >A collection of personal coffee brewing setups.</span
      >
    </h1>
  </header>
  <section>
    <ul class="grid grid-cols-4 gap-4">
      {
        interviews.map((interview, index) => {
          const row = Math.floor(index / 3);
          const posInRow = index % 3;
          const highlight =
            (row % 2 === 0 && posInRow === 0) ||
            (row % 2 === 1 && posInRow === 2);
          return (
            <li
              class:list={[
                "flex flex-col",
                {
                  "col-span-2": highlight,
                },
              ]}
            >
              <InterviewCard
                {...interview}
                variant={highlight ? "highlight" : "default"}
              />
            </li>
          );
        })
      }
    </ul>
  </section>
</Layout>
